{"version":3,"file":"static/js/171.d7a30fc5.chunk.js","mappings":"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","sources":["webpack://react-homework-template/./src/components/PaginationControls/PaginationControls.module.css?2c65","components/PaginationControls/PaginationControls.jsx","webpack://react-homework-template/./src/components/SplashScreen/SplashScreen.module.css?f0e9","components/SplashScreen/SplashScreen.jsx","controllers/api-controller.js","webpack://react-homework-template/./src/pages/Home/Home.module.css?1370","pages/Home/Home.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"Pagination\":\"PaginationControls_Pagination__88bya\",\"counter\":\"PaginationControls_counter__ksDJN\"};","import css from './PaginationControls.module.css'\n\nexport default function PaginationControls({ current, total, onClick }) {\n  const atStart = current === 1;\n  const atEnd = current === total;\n\n\n  return (\n    <div className={css.Pagination}>\n      <button type=\"button\" onClick={() => onClick(1)} disabled={atStart}>\n        &lt;&lt; First Page\n      </button>\n      <button\n        type=\"button\"\n        onClick={() => onClick(current - 1)}\n        disabled={atStart}\n      >\n        &lt; Prev page\n      </button>\n      <div className={css.counter}>\n        Page {current} of {total}\n      </div>\n      <button\n        type=\"button\"\n        onClick={() => onClick(current + 1)}\n        disabled={atEnd}\n      >\n        Next page &gt;\n      </button>\n      <button type=\"button\" onClick={() => onClick(total)} disabled={atEnd}>\n        Last Page &gt;&gt;\n      </button>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"Overlay\":\"SplashScreen_Overlay__griNT\"};","import { ThreeCircles } from 'react-loader-spinner';\nimport { createPortal } from 'react-dom';\n\nimport css from './SplashScreen.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default function SplashScreen () {\n  return createPortal(\n    <div className={css.Overlay}>\n      <ThreeCircles\n        height=\"160\"\n        width=\"160\"\n        color=\"#ffffff\"\n        wrapperStyle={{}}\n        wrapperClass=\"\"\n        visible={true}\n        ariaLabel=\"three-circles-rotating\"\n        outerCircleColor=\"\"\n        innerCircleColor=\"\"\n        middleCircleColor=\"\"\n      />\n    </div>,\n    modalRoot\n  );\n};\n\n","// API key\n// b0574b4adcec6022cde1a05e31ff0812\n\n// Token\n// eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiMDU3NGI0YWRjZWM2MDIyY2RlMWEwNWUzMWZmMDgxMiIsInN1YiI6IjY0Nzg1ODk3MGUyOWEyMDBhNjVlZTliYSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.LqRhvpUfAdXkzh0QdqReCBwm8cN_jLQcyKFyo2kwbME\n\n// Docs\n// https://developer.themoviedb.org/docs\n\nimport axios from 'axios';\n\nconst API_KEY = 'b0574b4adcec6022cde1a05e31ff0812';\nconst BASE_URL = 'https://api.themoviedb.org/3/';\n\nconst request = {\n  baseURL: BASE_URL,\n  params: {\n    api_key: API_KEY,\n  },\n};\n\nexport default async function getMovies(endpoint = '', options = {}) {\n  request.params = { ...request.params, ...options };\n  try {\n    const { data } = await axios.get(endpoint, request);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"Home\":\"Home_Home__+iehd\"};","import { useEffect, useReducer, useRef, useMemo } from 'react';\nimport { Link, useSearchParams, useLocation } from 'react-router-dom';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nimport getMovies from 'controllers/api-controller';\nimport PaginationControls from 'components/PaginationControls';\nimport SplashScreen from 'components/SplashScreen';\n\nimport css from './Home.module.css';\n\nconst INITIAL_STATE = {\n  data: [],\n  total_pages: 1,\n  isLoading: false,\n  // error: false,\n};\nconst MAX_PAGES = 1000;\nconst PAGINATION_RELATED_ERROR = 22;\n\nexport default function Home() {\n  const skipFetch = useRef(false);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [state, dispatch] = useReducer(reducer, INITIAL_STATE);\n  const location = useLocation();\n  const ENDPOINT = 'trending/movie/day';\n\n  const currentPage = useMemo(() => {\n    const page = Number(searchParams.get('page'));\n    if (searchParams.get('page') === null) {\n      return 1;\n    }\n    if (isNaN(page) || page < 1 || page > MAX_PAGES) {\n      skipFetch.current = true;\n      return 1;\n    }\n    return page;\n  }, [searchParams]);\n\n  const handlePagination = page => {\n    setSearchParams({ page });\n  };\n\n  function reducer(state, action) {\n    switch (action.type) {\n      case 'data/total':\n        return {\n          ...state,\n          total_pages: action.payload,\n        };\n      case 'data/set':\n        return {\n          ...state,\n          total_pages: action.payload.total_pages,\n          data: action.payload.results,\n        };\n      // case 'page/reset':\n      //   setSearchParams({});\n      //   return state;\n      // case 'error/set':\n      //   return { ...state, error: action.payload };\n      case 'status/loading':\n        return {\n          ...state,\n          isLoading: action.payload,\n        };\n\n      default:\n        return state;\n    }\n  }\n\n  useEffect(() => {\n    if (skipFetch.current) {\n      skipFetch.current = false;\n      setSearchParams({});\n\n      return;\n    }\n\n    dispatch({ type: 'status/loading', payload: true });\n    // dispatch({ type: 'error/set', payload: false });\n    getMovies(ENDPOINT, { page: currentPage })\n      .then(({ results, total_pages }) => {\n        // console.log(results);\n        dispatch({ type: 'data/set', payload: { results, total_pages } });\n      })\n      .catch(error => {\n        if (error.response.data.status_code === PAGINATION_RELATED_ERROR) {\n          setSearchParams({});\n        }\n        // dispatch({ type: 'error/set', payload: true });\n        Notify.info(`${error.response.data.status_message}`);\n      })\n      .finally(() => {\n        dispatch({ type: 'status/loading', payload: false });\n      });\n  }, [currentPage, setSearchParams]);\n\n  return (\n    <>\n      <PaginationControls\n        current={currentPage}\n        total={state.total_pages}\n        onClick={handlePagination}\n      />\n      {state.isLoading ? (\n        <SplashScreen />\n      ) : state.data.length > 0 ? (\n        <ul className={css.Home}>\n          {state.data.map(movie => (\n            <li key={movie.id}>\n              <Link to={`movies/${movie.id}`} state={{ from: location }}>\n                <img\n                  src={\n                    'https://image.tmdb.org/t/p/w220_and_h330_face' +\n                    movie.poster_path\n                  }\n                  alt={movie.title}\n                />\n                <h2>{movie.title}</h2>\n              </Link>\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <p>No movies to display</p>\n      )}\n    </>\n  );\n}\n"],"names":["PaginationControls","_ref","current","total","onClick","atStart","atEnd","_jsxs","className","css","children","_jsx","type","disabled","modalRoot","document","querySelector","SplashScreen","createPortal","ThreeCircles","height","width","color","wrapperStyle","wrapperClass","visible","ariaLabel","outerCircleColor","innerCircleColor","middleCircleColor","request","baseURL","params","api_key","getMovies","_getMovies","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","endpoint","options","_yield$axios$get","data","_args","wrap","_context","prev","next","length","undefined","_objectSpread","axios","sent","abrupt","t0","stop","INITIAL_STATE","total_pages","isLoading","MAX_PAGES","PAGINATION_RELATED_ERROR","Home","skipFetch","useRef","_useSearchParams","useSearchParams","_useSearchParams2","_slicedToArray","searchParams","setSearchParams","_useReducer","useReducer","state","action","payload","results","_useReducer2","dispatch","location","useLocation","currentPage","useMemo","page","Number","get","isNaN","useEffect","then","catch","error","response","status_code","Notify","concat","status_message","finally","_Fragment","map","movie","Link","to","id","from","src","poster_path","alt","title"],"sourceRoot":""}